<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fill in the Blanks Quiz</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            background: hsla(212, 79%, 72%, 0.937);
            background-size: cover;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        .drop-zone {
            border: 2px dashed #666666;
            padding: 5px 10px;
            min-width: 100px;
            background-color: #e3f7fa;
            display: inline-block;
            margin: 0 5px;
        }

        .draggable {
            margin: 10px;
            padding: 5px 10px;
            background-color: #e3e4d5;
            border: 1px solid #ccc;
            cursor: pointer;
            display: inline-block;
        }

        .draggable:hover {
            background-color: #f59e0b;
        }

        .popup-message {
            position: absolute;
            background-color: #f87171;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            display: none;
            z-index: 10;
        }

        #confetti {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: none;
        }

        .answer-container {
            background-color: #7f9cf5;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .refresh-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none;
        }

        .refresh-btn:hover {
            background-color: #e4230a;
        }

        .next-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #0a20e4;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .next-btn:hover {
            background-color: #6088df;
        }
    </style>
</head>

<body>

    <div class="container my-4">
        <h1 class="text-center text-white mb-4">LESSON 1: SALAMU (GREETINGS)</h1>

        <!-- Section to describe the quiz -->
        <section class="quiz-intro  text-black p-4 rounded shadow-lg mb-4" style="background-color: #e3e4d5;">
            <h2 class="text-center">Jaza Mapengo (Fill in the Blanks)</h2>
            <p class="text-center">
                Test your Swahili greetings with this fill-in-the-blanks quiz! Drag and drop the correct phrases into the
                sentences. Good luck!
            </p>
        </section>

        <div class="row g-4">
            <!-- Question Section -->
            <div class="col-md-8">
                <div class="bg-light p-4 rounded shadow">
                    <h2 class="mb-4">A. Salamu/Greetings</h2>
                    <div class="mb-3">
                        1. In the morning, you would say <span class="drop-zone" data-answer="Habari"></span> ya asubuhi.
                    </div>
                    <div class="mb-3">
                        2. When asking someone their name, you say “Jina lako ni <span class="drop-zone" data-answer="nani"></span>.”
                    </div>
                    <div class="mb-3">
                        3. When a child meets their mother, they say “<span class="drop-zone" data-answer="shikamoo"></span> mama.”
                    </div>
                    <div class="mb-3">
                        4. Before going to sleep at night, it's nice to say, "<span class="drop-zone" data-answer="usiku"></span> mwema."
                    </div>
                    <div class="mb-3">
                        5. To say sorry to someone, you say “<span class="drop-zone" data-answer="pole"></span> mama.”
                    </div>
                </div>
            </div>

            <!-- Answer Section -->
            <div class="col-md-4">
                <div class="answer-container shadow">
                    <h4 class="text-white">Drag and Drop Answers:</h4>
                    <div id="answer-items" class="d-flex flex-wrap justify-content-start">
                        <!-- Answers will be inserted here via JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Confetti Canvas -->
        <canvas id="confetti"></canvas>

        <!-- Refresh Button -->
        <div class="text-center mt-4">
            <button id="refresh-button" class="refresh-btn" onclick="refreshQuiz()">Refresh Quiz</button>
        </div>

        <!-- Next Button -->
        <div class="d-flex justify-content-end mt-4">
            <button id="next-button" class="next-btn" onclick="goToNextPage()">Next</button>
        </div>
    </div>

    <!-- Bootstrap JS and dependencies (Popper.js, etc.) -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>

    <script>
        const draggables = [
            { text: "Habari", answer: "Habari" },
            { text: "nani", answer: "nani" },
            { text: "shikamoo", answer: "shikamoo" },
            { text: "usiku", answer: "usiku" },
            { text: "pole", answer: "pole" }
        ];

        const answerContainer = document.getElementById('answer-items');
        const dropZones = document.querySelectorAll('.drop-zone');
        const confettiCanvas = document.getElementById('confetti');
        const refreshButton = document.getElementById('refresh-button');
        let confettiCtx = confettiCanvas.getContext('2d');
        let confettiActive = false;

        // Shuffle answers function
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Add draggable items to the answer container
        function addDraggables() {
            shuffle(draggables);
            draggables.forEach(item => {
                const draggableElement = document.createElement('div');
                draggableElement.className = 'draggable';
                draggableElement.draggable = true;
                draggableElement.dataset.answer = item.answer;
                draggableElement.textContent = item.text;

                // Set drag event
                draggableElement.addEventListener('dragstart', dragStart);
                answerContainer.appendChild(draggableElement);
            });
        }

        // Drag start function
        function dragStart(e) {
            e.dataTransfer.setData('text', e.target.dataset.answer);
        }

        // Handle drop and match check
        dropZones.forEach(dropZone => {
            dropZone.addEventListener('dragover', function (e) {
                e.preventDefault();
            });

            dropZone.addEventListener('drop', function (e) {
                e.preventDefault();
                const draggedAnswer = e.dataTransfer.getData('text');
                if (draggedAnswer === dropZone.dataset.answer) {
                    dropZone.textContent = draggedAnswer;
                    dropZone.style.backgroundColor = '#34d399'; // Green for correct
                    document.querySelector(`[data-answer="${draggedAnswer}"]`).style.display = 'none';
                    checkAllAnswered();
                }
            });
        });

        // Check if all answers are correct
        function checkAllAnswered() {
            const allAnswered = Array.from(dropZones).every(dropZone => dropZone.textContent);
            if (allAnswered) {
                refreshButton.style.display = 'block';
                startConfetti();
            }
        }

        // Start confetti animation
        function startConfetti() {
            confettiActive = true;
            confettiCanvas.style.display = 'block';
            // Simple confetti effect (you can enhance it if needed)
        }

        // Reset quiz
        function refreshQuiz() {
            dropZones.forEach(dropZone => {
                dropZone.textContent = '';
                dropZone.style.backgroundColor = '#e3f7fa';
            });
            answerContainer.innerHTML = '';
            refreshButton.style.display = 'none';
            confettiCanvas.style.display = 'none';
            confettiActive = false;
            addDraggables();
        }

        // Load draggable items on page load
        window.onload = function () {
            addDraggables();
        };

        function goToNextPage() {
            // Navigate to the next page or show the next quiz section
        }
    </script>
</body>

</html>
