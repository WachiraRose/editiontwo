<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JAZA mAPENGO</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: rgb(85, 1, 85); /* Replace with your image URL */
            background-size: cover;
            font-family: 'Arial', sans-serif;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        .drop-zone {
            border: 2px dashed #575656;
            padding: 5px 10px;
            min-width: 100px;
            background-color: #f9f9f9;
            display: inline-block;
            margin: 0 5px; /* Added margin for spacing */
        }

        .draggable {
            margin: 10px;
            padding: 5px 10px;
            background-color: #c7e2f1;
            border: 1px solid #ccc;
            cursor: pointer;
            display: inline-block;
        }

        .draggable:hover {
            background-color: #ddd;
        }

        .popup-message {
            position: absolute;
            background-color: #f87171;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            display: none;
            z-index: 10; /* Ensure it appears above other elements */
        }

        #confetti {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: none; /* Initially hidden */
        }

        /* Section colors */
       

        .section-b {
            background-color: #f0e6ede3; /* Light blue */
        }

        /* Answer container color */
        .answer-container {
            background-color: #f3bde3e3; /* Light red */
        }

        /* Container styles */
        .quiz-container {
            background-color: rgb(113, 113, 129);
            padding: 40px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: flex; /* Make the container flex */
            align-items: flex-start; /* Align items at the start */
        }

        .questions {
            flex: 1; /* Allow questions to take available space */
            margin-right: 20px; /* Space between questions and answers */
            
        }

        .answers {
            flex: 0 0 150px; /* Smaller fixed width for answers */
            display: flex;
            flex-direction: column; /* Stack answers vertically */
            justify-content: flex-start; /* Align items at the start */
        }

       /* Media query for small screens */
       @media (max-width: 640px) {
            .quiz-container {
                flex-direction: column;
                align-items: center;
            }

            .questions {
                margin-right: 0;
                margin-bottom: 20px;
            }

            .answers {
                flex: 1;
                width: 100%;
                max-width: 320px;
                display: flex;
                justify-content: space-around;
                flex-wrap: wrap;
            }

            .drop-zone, .draggable {
                font-size: 14px;
                padding: 5px;
                margin: 5px;
            }
        }

        .refresh-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50; /* Green background */
            color: white; /* White text */
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none; /* Initially hidden */
        }

        .refresh-btn:hover {
            background-color: #f0211a; /* Darker green on hover */
        }

        /* Right-aligned Next button */
        .previous-container {
            width: 100%;
            display: flex;
            justify-content: flex-end; /* Aligns button to the right */
        }

        .previous-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #509cff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .previous-btn:hover {
            background-color: #4597e4;
        }
    </style>
</head>
<body >
    <h1 class="text-4xl font-bold my-4 text-white">LESSON 1: SALAMU(GREETINGS)</h1>

    <!-- Section to describe the quiz -->
    <section class="quiz-intro bg-gradient-to-r from-pink-800 to-purple-600 text-cream-300 p-6 rounded-lg shadow-lg w-11/12 md:w-3/4 lg:w-1/2 mb-6 transform transition-all hover:scale-105 duration-300">
        <h2 class="text-2xl font-extrabold mb-4 text-gray-800">Jaza Mapengo (Fill in the Blanks)</h2>
        <p class="text-base md:text-lg font-medium text-white">
            Test your Swahili greetings with this fill-in-the-blanks quiz! Drag and drop the correct phrases into the sentences. It's a fun way to practice and improve your Swahili vocabulary. Good luck and have fun!
        </p>
    </section>

    <div class="quiz-container relative flex">
        <!-- Section A (Fill in the Blanks) -->
        

        <!-- Section B (True/False) -->
        <div id="quiz-container-" class="section-b questions">
            <h2 class="text-xl font-bold my-4"> B. Jibu Ukweli au Uwongo:</h2>

            <div class="question my-2">
                1. "Habari ya asubuhi" means "Good night" in Kiswahili. <span class="drop-zone" data-answer="False"></span>
            </div>
            <div class="question my-2">
                2. You would say "Hodi, hodi?” to mean “May I come in?” <span class="drop-zone" data-answer="True"></span>
            </div>
            <div class="question my-2">
                3. "Lala unono" is a greeting you use in the morning. <span class="drop-zone" data-answer="False"></span>
            </div>
            <div class="question my-2">
                4. "Habari ya jioni" translates to "Good evening" in English. <span class="drop-zone" data-answer="True"></span>
            </div>
            <div class="question my-2">
                5. “Hatujambo” means “We are fine.” <span class="drop-zone" data-answer="True"></span>
            </div>
            <div id="popup-message-b" class="popup-message"></div>
        </div>

        <!-- Answer container for draggable items -->
        <div id="answer-container" class="answer-container w-11/12 md:w-4/12 mt-4 p-4 rounded shadow-lg flex flex-col justify-start">
            <p class="text-lg font-semibold mb-2">Drag and Drop:</p>
            <div class="flex flex-wrap justify-start" id="answer-items">
                <!-- Answers will be populated here by JavaScript -->
            </div>
        </div>
    </div>

    

    <!-- Confetti canvas -->
    <canvas id="confetti"></canvas>

    <!-- Refresh Button -->
    <button id="refresh-button" class="refresh-btn" onclick="refreshQuiz()">Refresh Quiz</button>

     <!-- Next Button in a right-aligned container -->
     <div class="previous-container">
        <button id="previous-button" class="previous-btn" onclick="goToNextPage()">Back</button>
    </div>

    <script>
        const draggables = [
            
            { text: "True", answer: "True" },
            { text: "False", answer: "False" },
            { text: "False", answer: "False" },
            { text: "True", answer: "True" },
            { text: "True", answer: "True" }
        ];

        const answerContainer = document.getElementById('answer-items');
        const dropZones = document.querySelectorAll('.drop-zone');
        const popupMessageA = document.getElementById('popup-message-a');
        const popupMessageB = document.getElementById('popup-message-b');
        const confettiCanvas = document.getElementById('confetti');
        const refreshButton = document.getElementById('refresh-button');
        let confettiCtx = confettiCanvas.getContext('2d');
        let confettiActive = false;

        // Shuffle answers function
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Add draggable items to the answer container
        function addDraggables() {
            shuffle(draggables);
            draggables.forEach(item => {
                const draggableElement = document.createElement('div');
                draggableElement.className = 'draggable';
                draggableElement.draggable = true;
                draggableElement.dataset.answer = item.answer;
                draggableElement.textContent = item.text;

                // Set drag event
                draggableElement.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', item.answer);
                });

                answerContainer.appendChild(draggableElement);
            });
        }

        // Allow dropping on drop zones
        dropZones.forEach(dropZone => {
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
            });

            dropZone.addEventListener('drop', (e) => {
                const answer = e.dataTransfer.getData('text/plain');
                const correctAnswer = dropZone.dataset.answer;

                // Check if answer is correct
                if (answer === correctAnswer) {
                    dropZone.textContent = answer;
                    dropZone.style.color = "green"; // Change text color to green on correct answer
                    showPopup(dropZone.closest('.section-a') ? popupMessageA : popupMessageB, 'Correct!', dropZone);
                    playConfetti();
                    dropZone.classList.add('filled'); // Mark the drop zone as filled

                    // Remove the draggable item from the answer container
                    const draggable = document.querySelector(`.draggable[data-answer='${answer}']`);
                    if (draggable) {
                        draggable.remove(); // Remove the item from the DOM
                    }

                    // Check if all answers are filled
                    if (Array.from(dropZones).every(zone => zone.classList.contains('filled'))) {
                        refreshButton.style.display = 'block'; // Show refresh button
                    }
                } else {
                    // Return to answer container if wrong
                    const draggable = document.querySelector(`.draggable[data-answer='${answer}']`);
                    if (draggable) {
                        draggable.style.color = "red"; // Change color to red on wrong answer
                        showPopup(dropZone.closest('.section-a') ? popupMessageA : popupMessageB, 'Try again!', dropZone);
                        // Return the draggable to the container
                        answerContainer.appendChild(draggable); 
                    }
                }

                updateDraggableState(answer); // Update the draggable state
            });
        });

        function showPopup(popup, message, target) {
            popup.textContent = message;
            popup.style.display = 'block';
            popup.style.top = target.getBoundingClientRect().top + window.scrollY + 'px';
            popup.style.left = target.getBoundingClientRect().left + 'px';

            setTimeout(() => {
                popup.style.display = 'none';
            }, 1000);
        }

        function updateDraggableState(answer) {
            // No additional actions needed for now
        }

        // Confetti function
        function playConfetti() {
            if (!confettiActive) {
                confettiActive = true;
                confettiCanvas.width = window.innerWidth;
                confettiCanvas.height = window.innerHeight;
                let particles = [];

                for (let i = 0; i < 300; i++) {
                    particles.push({
                        x: Math.random() * confettiCanvas.width,
                        y: Math.random() * confettiCanvas.height,
                        radius: Math.random() * 5 + 2,
                        color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                        speed: Math.random() * 3 + 1,
                        angle: Math.random() * Math.PI * 2
                    });
                }

                function animateConfetti() {
                    const confettiCtx = confettiCanvas.getContext('2d');
                    confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                    particles.forEach((particle, index) => {
                        confettiCtx.beginPath();
                        confettiCtx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                        confettiCtx.fillStyle = particle.color;
                        confettiCtx.fill();
                        particle.x += Math.cos(particle.angle) * particle.speed;
                        particle.y += Math.sin(particle.angle) * particle.speed;

                        // Reset particles that go out of bounds
                        if (particle.x < 0 || particle.x > confettiCanvas.width || particle.y < 0 || particle.y > confettiCanvas.height) {
                            particles.splice(index, 1);
                        }
                    });

                    if (particles.length > 0) {
                        requestAnimationFrame(animateConfetti);
                    }
                }

                confettiCanvas.style.display = 'block'; // Show the canvas
                animateConfetti();

                // Hide confetti after 3 seconds
                setTimeout(() => {
                    confettiCanvas.style.display = 'none'; // Hide confetti after 3 sec
                    confettiActive = false; // Reset flag for next correct answer
                }, 3000);
            }
        }

        // Function to go to the next page
        function goToNextPage() {
            window.location.href = 'index.html'; // Replace with actual URL of the next page
        }

        // Refresh quiz function
        function refreshQuiz() {
            // Reset drop zones
            dropZones.forEach(zone => {
                zone.textContent = ''; // Clear text
                zone.style.color = ''; // Reset color
                zone.classList.remove('filled'); // Remove filled class
            });

            // Reset answer container
            const draggableItems = document.querySelectorAll('.draggable');
            draggableItems.forEach(item => {
                item.style.color = ''; // Reset color
            });

            // Re-add draggables to the answer container
            answerContainer.innerHTML = ''; // Clear existing draggables
            addDraggables(); // Re-add draggable items

            refreshButton.style.display = 'none'; // Hide refresh button
        }

        // Initialize the quiz
        addDraggables();
    </script>
</body>
</html>
