<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fill in the Blanks Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            background: hsla(212, 79%, 72%, 0.937); /* Replace with your image URL */
            background-size: cover;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 0;
        }

        .drop-zone {
            border: 2px dashed #666666;
            padding: 5px 10px;
            min-width: 100px;
            background-color: #d8d5d5;
            display: inline-block;
            margin: 0 5px;
        }

        .draggable {
            margin: 10px;
            padding: 5px 10px;
            background-color: #80d5e4;
            border: 1px solid #ccc;
            cursor: pointer;
            display: inline-block;
        }

        .draggable:hover {
            background-color: #ddd;
        }

        .popup-message {
            position: absolute;
            background-color: #f87171;
            color: white;
            padding: 5px 10px;
            border-radius: 5px;
            display: none;
            z-index: 10;
        }

        #confetti {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            display: none;
        }

        /* Section colors */
        .section-a {
            /*background-color: #0aebf3;*/
            background-color: #8fa1a1;
        }

        /* Answer container color */
        .answer-container {
            background-color: #046063;
        }

        /* Container styles */
        .quiz-container {
            background-color: hsl(12, 3%, 68%);
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
            display: flex;
            flex-wrap: wrap; /* Ensure flexibility for small screens */
            justify-content: space-between;
        }

        .questions {
            flex: 1; /* Take available space */
            margin-right: 20px;
        }

        .answers {
            flex: 0 0 150px;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
        }

        /* Media query for small screens */
        @media (max-width: 640px) {
            .quiz-container {
                flex-direction: column;
                align-items: center;
            }

            .questions {
                margin-right: 0;
                margin-bottom: 20px;
            }

            .answers {
                flex: 1;
                width: 100%;
                max-width: 320px;
                display: flex;
                justify-content: space-around;
                flex-wrap: wrap;
            }

            .drop-zone, .draggable {
                font-size: 14px;
                padding: 5px;
                margin: 5px;
            }
        }

        .refresh-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none;
        }

        .refresh-btn:hover {
            background-color: #e4230a;
        }

        /* Right-aligned Next button */
        .next-container {
            width: 100%;
            display: flex;
            justify-content: flex-end; /* Aligns button to the right */
        }

        .next-btn {
            margin-top: 20px;
            padding: 10px 20px;
            background-color: #0a20e4;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .next-btn:hover {
            background-color: #6088df;
        }
    </style>
</head>
<body >
    <h1 class="text-4xl font-bold my-4 text-white">LESSON 1: SALAMU(GREETINGS)</h1>

    <!-- Section to describe the quiz -->
    <section class="quiz-intro bg-gradient-to-r from-cyan-400 to-cyan-600 text-cream-300 p-6 rounded-lg shadow-lg w-11/12 md:w-3/4 lg:w-1/2 mb-6 transform transition-all hover:scale-105 duration-300">
        <h2 class="text-2xl font-extrabold mb-4 text-gray-800">Jaza Mapengo (Fill in the Blanks)</h2>
        <p class="text-base md:text-lg font-medium text-white">
            Test your Swahili greetings with this fill-in-the-blanks quiz! Drag and drop the correct phrases into the sentences. It's a fun way to practice and improve your Swahili vocabulary. Good luck and have fun!
        </p>
    </section>
    
    
    
    

    <div class="quiz-container relative">
        <!-- Section A (Fill in the Blanks) -->
        <div id="quiz-container-a" class="section-a questions">
            <h2 class="text-2xl font-bold my-4"> A. Salamu/Greetings</h2>
            <div class="question my-2">
                1. In the morning, you would say <span class="drop-zone" data-answer="Habari"></span> ya asubuhi.
            </div>
            <div class="question my-2">
                2. When asking someone their name, you say “Jina lako ni <span class="drop-zone" data-answer="nani"></span>.”
            </div>
            <div class="question my-2">
                3. When a child meets their mother, they say “<span class="drop-zone" data-answer="shikamoo"></span> mama.”
            </div>
            <div class="question my-2">
                4. Before going to sleep at night, it's nice to say, "<span class="drop-zone" data-answer="usiku"></span> mwema."
            </div>
            <div class="question my-2">
                5. To say sorry to someone, you say “<span class="drop-zone" data-answer="pole"></span> mama.”
            </div>
        </div>

        <!-- Answer container for draggable items -->
        <div id="answer-container" class="answer-container w-11/12 md:w-4/12 mt-4 p-4 rounded shadow-lg flex flex-col justify-start">
            <p class="text-lg font-semibold mb-2">Drag and Drop the answers:</p>
            <div class="flex flex-wrap justify-start" id="answer-items">
                <!-- Answers will be populated here by JavaScript -->
            </div>
        </div>
    </div>

    <!-- Confetti canvas -->
    <canvas id="confetti"></canvas>

    <!-- Refresh Button -->
    <button id="refresh-button" class="refresh-btn" onclick="refreshQuiz()">Refresh Quiz</button>

     <!-- Next Button in a right-aligned container -->
     <div class="next-container">
        <button id="next-button" class="next-btn" onclick="goToNextPage()">Next</button>
    </div>

    <script>
        const draggables = [
            { text: "Habari", answer: "Habari" },
            { text: "nani", answer: "nani" },
            { text: "shikamoo", answer: "shikamoo" },
            { text: "usiku", answer: "usiku" },
            { text: "pole", answer: "pole" }
        ];

        const answerContainer = document.getElementById('answer-items');
        const dropZones = document.querySelectorAll('.drop-zone');
        const popupMessageA = document.getElementById('popup-message-a');
        const confettiCanvas = document.getElementById('confetti');
        const refreshButton = document.getElementById('refresh-button');
        let confettiCtx = confettiCanvas.getContext('2d');
        let confettiActive = false;

        // Shuffle answers function
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
        }

        // Add draggable items to the answer container
        function addDraggables() {
            shuffle(draggables);
            draggables.forEach(item => {
                const draggableElement = document.createElement('div');
                draggableElement.className = 'draggable';
                draggableElement.draggable = true;
                draggableElement.dataset.answer = item.answer;
                draggableElement.textContent = item.text;

                // Set drag event
                draggableElement.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', item.answer);
                });

                answerContainer.appendChild(draggableElement);
            });
        }

        // Allow dropping on drop zones
        dropZones.forEach(dropZone => {
            dropZone.addEventListener('dragover', (e) => {
                e.preventDefault();
            });

            dropZone.addEventListener('drop', (e) => {
                const answer = e.dataTransfer.getData('text/plain');
                const correctAnswer = dropZone.dataset.answer;

                // Check if answer is correct
                if (answer === correctAnswer) {
                    dropZone.textContent = answer;
                    dropZone.style.color = "green";
                    playConfetti();
                    dropZone.classList.add('filled');

                    // Remove the draggable item from the answer container
                    const draggable = document.querySelector(`.draggable[data-answer='${answer}']`);
                    if (draggable) {
                        draggable.remove();
                    }

                    // Check if all answers are filled
                    if (Array.from(dropZones).every(zone => zone.classList.contains('filled'))) {
                        refreshButton.style.display = 'block';
                    }
                } else {
                    // Return to answer container if wrong
                    const draggable = document.querySelector(`.draggable[data-answer='${answer}']`);
                    if (draggable) {
                        draggable.style.color = "red";
                        answerContainer.appendChild(draggable);
                    }
                }
            });
        });

         // Confetti function
         function playConfetti() {
            if (!confettiActive) {
                confettiActive = true;
                confettiCanvas.width = window.innerWidth;
                confettiCanvas.height = window.innerHeight;
                let particles = [];

                for (let i = 0; i < 300; i++) {
                    particles.push({
                        x: Math.random() * confettiCanvas.width,
                        y: Math.random() * confettiCanvas.height,
                        radius: Math.random() * 5 + 2,
                        color: `hsl(${Math.random() * 360}, 100%, 50%)`,
                        speed: Math.random() * 3 + 1,
                        angle: Math.random() * Math.PI * 2
                    });
                }

                function animateConfetti() {
                    const confettiCtx = confettiCanvas.getContext('2d');
                    confettiCtx.clearRect(0, 0, confettiCanvas.width, confettiCanvas.height);
                    particles.forEach((particle, index) => {
                        confettiCtx.beginPath();
                        confettiCtx.arc(particle.x, particle.y, particle.radius, 0, Math.PI * 2);
                        confettiCtx.fillStyle = particle.color;
                        confettiCtx.fill();
                        particle.x += Math.cos(particle.angle) * particle.speed;
                        particle.y += Math.sin(particle.angle) * particle.speed;

                        // Reset particles that go out of bounds
                        if (particle.x < 0 || particle.x > confettiCanvas.width || particle.y < 0 || particle.y > confettiCanvas.height) {
                            particles.splice(index, 1);
                        }
                    });

                    if (particles.length > 0) {
                        requestAnimationFrame(animateConfetti);
                    }
                }

                confettiCanvas.style.display = 'block'; // Show the canvas
                animateConfetti();

                // Hide confetti after 3 seconds
                setTimeout(() => {
                    confettiCanvas.style.display = 'none'; // Hide confetti after 3 sec
                    confettiActive = false; // Reset flag for next correct answer
                }, 3000);
            }
        }

        // Function to go to the next page
        function goToNextPage() {
            window.location.href = 'true.html'; // Replace with actual URL of the next page
        }

        
        function refreshQuiz() {
            // Reset drop zones
            dropZones.forEach(zone => {
                zone.textContent = '';
                zone.style.color = '';
                zone.classList.remove('filled');
            });
            answerContainer.innerHTML = '';
            refreshButton.style.display = 'none';
            addDraggables();
        }

        window.onload = () => {
            addDraggables();
        };
    </script>
</body>
</html>
